<!DOCTYPE html>
<html ng-app="appname">
<head>
  <meta charset="utf-8"/>
  <!-- Load AngularJS, AngularJS Route, AngularJS+Bootstrap(ui.bootstrap),jQuery,BootstrapJS,and table.js -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.8/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0-rc.2/angular-route.js"></script>
  <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.1.1.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="table.js"></script>
  <style>

  table{
    cursor:pointer;
    table-layout:fixed;
  }
  #table_div{
    max-height:500px;
    overflow-x:scroll;
    overflow-y:scroll;
  }

  </style>
</head>
<body>

  <div class="container" ng-controller="appCtrl">
    <h1>{{ json.keyword }}</h1>
    <div id="table_div">
      <table class="table table-condensed table-bordered table-hover">
      	<tbody>
          <!-- COLUMNS -->
          <tr>
            <td ng-repeat="(k,v) in json.columns track by $index"
                  ng-click="open('column', k, rowIndex, v.testingStatus.approved, v.testingStatus.issue, v.testingStatus.notes)"
                  ng-class="{ success : v.testingStatus.approved, danger : v.testingStatus.issue }"
                  ng-style="{width: v.columnDef.width}">
                  {{ v.columnDef.label }}
            </td>
          </tr>
          <!-- ROWS -->
      		<tr ng-repeat="(rowIndex, row) in json.rows track by $index"
              ng-class="{ success : row.rowData.rank.testingStatus.approved, danger : row.rowData.rank.testingStatus.issue }">
      			<td
              ng-repeat="(k,v) in json.columns track by $index"
              ng-click="open('cell', k, rowIndex, row.rowData[v.columnDef.id].testingStatus.approved, row.rowData[v.columnDef.id].testingStatus.issue, row.rowData[v.columnDef.id].testingStatus.notes)"
              ng-class="{success : ((row.rowData[v.columnDef.id].testingStatus.approved || json.columns[k].testingStatus.approved) && !row.rowData[v.columnDef.id].testingStatus.issue), danger : ((row.rowData[v.columnDef.id].testingStatus.issue || json.columns[k].testingStatus.issue) && !row.rowData[v.columnDef.id].testingStatus.approved)} ">
              {{ row.rowData[v.columnDef.id].value }}
            </td>
      		</tr>
      	</tbody>
      </table>
    </div>
  </div>

</body>
</html>
